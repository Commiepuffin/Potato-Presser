<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Potato Presser</title>
    <style>
        #error {
            color: red;
            position: absolute;
            float: right;
            left: 85%;
            top: 10px;
        }
    </style>
</head>

<body>


    <h1 id=output></h1>
    <h2 id=potatoesPerSecond></h2>
    <h3 id="stopWatch">you have been harvesting potatoes for 0 seconds</h3>
    <img id=potato src="https://freepngdownload.com/image/thumb/potato-png-free-download-12.png" width="400"
        alt="potato">
    <h3 id=error>You dont have enough potatoes</h3>
    <h3>Buy upgrades to increase your potato farming power</h3>
    <button id=worker>Common workers-price: 1 potato</button>
    <h4 id=workerText></h4>
    <button id=tractor>Buy some tractors-price: 25 potatoes</button>
    <h4 id=tractorText></h4>
    <button id=wheelbarrow>Wheelbarrows for sale only: 150 potatoes</button>
    <h4 id=wheelbarrowText></h4>




    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

    <script>
        var $potatoes = $('#output');
        var $workers = $('#workerText');
        var $error = $('#error');
        var $workerPrice = $('#worker');
        var $tractor = $('#tractor');
        var $tractorText = $('#tractorText');
        var $wheelbarrow = $('#wheelbarrow');
        var $wheelbarrowText = $('#wheelbarrowText');
        var $pps = $('#potatoesPerSecond');
        var potatoCounter = 0;
        var workerCount = 0;
        var workerPrice = 1;
        var workerRegulator = 1;
        var tractorCount = 0;
        var tractorPrice = 25;
        var tractorRegulator = 25;
        var wheelbarrowCount = 0;
        var wheelbarrowPrice = 150;
        var wheelbarrowRegulator = 150;
        var workerPps = 0;
        var tractorPps = 0;
        var wheelbarrowPps = 0;
        var time = 0;
        $error.hide();
        $tractor.hide();
        $wheelbarrow.hide();
        $potatoes.text("press the potato to begin harvesting")
        $("#potato").on("click", function (event) {
            potatoCounter++;
            finalPotatoes = potatoCounter.toFixed(0);
            $potatoes.text("you have harvested " + finalPotatoes + " potatoes")
            $error.hide();
            console.log(finalPotatoes);
        });
        $("#worker").on("click", function (event) {
            if (potatoCounter > workerRegulator) {
                finalWorkerPrice = workerPrice.toFixed(0);
                potatoCounter = potatoCounter -= finalWorkerPrice;
                workerPrice = workerPrice += ((workerCount * 4) / workerPrice);
                workerCount++;
                finalWorkerPrice = workerPrice.toFixed(0);
                finalPotatoes = potatoCounter.toFixed(0);
                workerPps = ((workerCount) * (1 / 2))
                workerPps = workerPps.toFixed(1)
                $potatoes.text("you have harvested " + finalPotatoes + " potatoes")
                $workers.text("you have " + workerCount + " loyal workers. they are making " + (workerPps) + " potatoes per second")
                $workerPrice.html("Common workers-price: " + finalWorkerPrice + " potatoes")
                workerRegulator = finalWorkerPrice;
                $error.hide();
                console.log(finalPotatoes);

            }
            else {
                $error.show();

            }

        });
        $("#tractor").on("click", function (event) {
            if (potatoCounter > tractorRegulator) {
                finalTractorPrice = tractorPrice.toFixed(0);
                potatoCounter = potatoCounter -= finalTractorPrice;
                tractorPrice = tractorPrice += ((tractorCount * 10) / (tractorPrice / 20));
                tractorCount++;
                finalTractorPrice = tractorPrice.toFixed(0);
                finalPotatoes = potatoCounter.toFixed(0);
                tractorPps = (tractorCount) * (4 / 3);
                tractorPps = tractorPps.toFixed(1)
                $potatoes.text("you have harvested " + finalPotatoes + " potatoes")
                $tractorText.text("you have " + tractorCount + " rusty tractors. they are producing " + tractorPps + " potatoes per second")
                $tractor.html("Buy some tractors-price: " + finalTractorPrice + " potatoes")
                tractorRegulator = finalTractorPrice;
                $error.hide();
                console.log(finalPotatoes);

            }
            else {
                $error.show();

            }
        });
        $("#wheelbarrow").on("click", function (event) {
            if (potatoCounter > wheelbarrowRegulator) {
                finalwheelbarrowPrice = wheelbarrowPrice.toFixed(0);
                potatoCounter = potatoCounter -= finalwheelbarrowPrice;
                wheelbarrowPrice = wheelbarrowPrice += ((wheelbarrowCount * 50) / (wheelbarrowPrice / 100));
                wheelbarrowCount++;
                finalwheelbarrowPrice = wheelbarrowPrice.toFixed(0);
                finalPotatoes = potatoCounter.toFixed(0);
                wheelbarrowPps = (wheelbarrowCount) * (4 / 3);
                wheelbarrowPps = wheelbarrowPps.toFixed(1)
                $potatoes.text("you have harvested " + finalPotatoes + " potatoes")
                $wheelbarrowText.text("you have " + wheelbarrowCount + " rickety wheelbarrows. they are producing " + wheelbarrowPps + " potatoes per second")
                $wheelbarrow.html("Wheelbarrows for sale, only: " + finalwheelbarrowPrice + " potatoes")
                wheelbarrowRegulator = finalwheelbarrowPrice;
                $error.hide();
                console.log(finalPotatoes);

            }
            else {
                $error.show();

            }
        });



        var i = 1;
        var timer = function (e) {
            setInterval(function () {
                i++;
                var time = (i / 60);
                potatoCounter = potatoCounter += (workerCount / 120);
                potatoCounter = potatoCounter += (tractorCount / 45);
                potatoCounter = potatoCounter += (wheelbarrowCount / 15);
                finalTime = time.toFixed(0);
                finalPotatoes = potatoCounter.toFixed(0);
              //  var totalPps = (workerPps + tractorPps + wheelbarrowPps)
                $potatoes.text("you have harvested " + finalPotatoes + " potatoes")
                //$pps.text("you are producing " + totalPps + " potatoes per second")
                $("#stopWatch").html("you have been harvesting potatoes for " + finalTime + " seconds");
                if (workerCount > 25) {
                    $tractor.show();
                    
                }
                if (tractorCount > 25) {
                    $wheelbarrow.show();
                    
                }
                


            }, (1000 / 60));
        }
        timer();
    </script>

</body>

</html>